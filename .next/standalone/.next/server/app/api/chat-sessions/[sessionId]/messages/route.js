"use strict";(()=>{var e={id:945,ids:[945]};e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2648:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>h,patchFetch:()=>l,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var a={};t.r(a),t.d(a,{POST:()=>p});var r=t(9303),n=t(8716),o=t(670),i=t(7070);const c=new(t(3524).PrismaClient);async function p(e,{params:s}){try{const{sessionId:t}=await s,a=await e.json();return await c.chatMessage.create({data:{sessionId:t,role:a.role,content:a.content,imageBase64:a.imageBase64,imagePreview:a.imagePreview}}),await c.chatSession.update({where:{id:t},data:{updatedAt:new Date}}),i.NextResponse.json({success:!0})}catch(t){return i.NextResponse.json({error:"\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8ffd\u52a0\u306b\u5931\u6557\u3057\u307e\u3057\u305f"},{status:500})}}const u=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/chat-sessions/[sessionId]/messages/route",pathname:"/api/chat-sessions/[sessionId]/messages",filename:"route",bundlePath:"app/api/chat-sessions/[sessionId]/messages/route"},resolvedPagePath:"/Users/johnpolison/first-chatbot/app/api/chat-sessions/[sessionId]/messages/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=u,h="/api/chat-sessions/[sessionId]/messages/route";function l(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=s.X(0,[948,972],(()=>{return e=2648,s(s.s=e);var e}));module.exports=t})();