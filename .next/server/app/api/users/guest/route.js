"use strict";(()=>{var e={id:174,ids:[174]};e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6262:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>l,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var r={};t.r(r),t.d(r,{POST:()=>c});var n=t(9303),a=t(8716),o=t(670),u=t(7070);const i=new(t(3524).PrismaClient);async function c(){try{const e=await i.user.findFirst({where:{isGuest:!0}});if(e)return u.NextResponse.json({success:!0,user:{id:e.id,name:e.name,isGuest:e.isGuest,guestToken:e.guestToken}});const s=Date.now(),t=`guest_${s}_${Math.random().toString(36).substr(2,9)}`,r=`\u30b2\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc_${s}`,n=await i.user.create({data:{name:r,isGuest:!0,guestToken:t}}),a={success:!0,user:{id:n.id,name:n.name,isGuest:n.isGuest,guestToken:n.guestToken}};return u.NextResponse.json(a)}catch(e){let s="\u30b2\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f";return e instanceof Error&&(s=e.message),u.NextResponse.json({success:!1,error:s,details:e instanceof Error?e.message:"\u4e0d\u660e\u306a\u30a8\u30e9\u30fc"},{status:500})}}const p=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/users/guest/route",pathname:"/api/users/guest",filename:"route",bundlePath:"app/api/users/guest/route"},resolvedPagePath:"/Users/johnpolison/first-chatbot/app/api/users/guest/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:m}=p,l="/api/users/guest/route";function h(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=s.X(0,[948,972],(()=>{return e=6262,s(s.s=e);var e}));module.exports=t})();